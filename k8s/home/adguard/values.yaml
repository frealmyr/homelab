app:
  image:
    repository: adguard/adguardhome
    tag: latest
    pullPolicy: Always

  annotations:
    keel.sh/policy: "all"
    keel.sh/trigger: poll
    keel.sh/pollSchedule: "@every 168h"

  persistentVolumes:
    static:
      - name: work
        mountPath: /opt/adguardhome/work
      - name: conf
        mountPath: /opt/adguardhome/conf

  containerPorts:
    - name: http
      containerPort: 3000
      protocol: TCP
    - name: dns-tcp
      containerPort: 53
      protocol: TCP
    - name: dns-udp
      containerPort: 53
      protocol: UDP

  services:
    - name: http
      type: ClusterIP
      ports:
        - name: http
          port: 3000
          targetPort: 3000
    - name: dns-tcp
      type: LoadBalancer
      loadBalancerIP: 10.8.0.10
      ports:
        - name: http
          port: 53
          targetPort: 53
    - name: dns-udp
      type: LoadBalancer
      loadBalancerIP: 10.8.0.10
      ports:
        - name: http
          port: 53
          targetPort: 53
          protocol: UDP

  ingresses:
    enabled: true
    ingress:
      - name: frontend
        service:
          name: http
          port: 3000
        hosts:
          - host: adguard.fmlab.no
            paths:
              - path: /
                pathType: ImplementationSpecific
        tls:
          - secretName: adguard
            hosts:
              - adguard.fmlab.no
