app:
  image:
    repository: arm64v8/redis
    tag: 7-alpine

  tolerations:
    - key: node-role.kubernetes.io/control-plane
      operator: Exists
      effect: NoSchedule

  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
        - matchExpressions:
          - key: kubernetes.io/hostname
            operator: In
            values:
            - k8s-controller-0

  persistentVolumes:
    static:
      - name: data
        mountPath: /data

  command:
    - redis-server
    - '--save 60 1' 
    - '--loglevel warning'

  containerPorts:
    - name: redis
      containerPort: 6379
      protocol: TCP

  services:
    - name: redis
      type: ClusterIP
      ports:
        - name: redis
          port: 6379
          targetPort: 6379
