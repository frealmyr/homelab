app:
  image:
    repository: lscr.io/linuxserver/transmission
    tag: latest

  environmentVariables:
    - name: PID
      value: "1000"
    - name: PGID
      value: "1000"
    - name: TZ
      value: "Europe/Oslo"
    - name: TRANSMISSION_WEB_HOME
      value: "/flood-for-transmission/"
    - name: PEERPORT
      value: "51413"

  persistentVolumes:
    pvc:
      create: true
      size: 100Gi
      mounts:
        - path: /config
          subPath: config
    hostPath:
      - name: hdd1
        mountPath: /media/HDD1/Entertainment
        hostPath: /media/HDD1/Entertainment
        type: Directory
      - name: hdd2
        mountPath: /media/HDD2/Entertainment
        hostPath: /media/HDD2/Entertainment
        type: Directory
      - name: ssd
        mountPath: /home/fredrick/Storage/Downloads
        hostPath: /home/fredrick/Storage/Downloads
        type: Directory

  containerPorts:
    - name: http
      containerPort: 9091
      protocol: TCP
    - name: peer-tcp
      containerPort: 51413
      protocol: TCP
    - name: peer-udp
      containerPort: 51413
      protocol: UDP

  services:
    - name: http
      type: ClusterIP
      ports:
        - name: http
          port: 9091
          targetPort: 9091
    - name: peer
      type: NodePort
      ports:
        - name: peer-tcp
          port: 51413
          targetPort: 51413
          nodePort: 32143
        - name: peer-udp
          port: 51413
          targetPort: 51413
          protocol: UDP
          nodePort: 32143

  ingresses:
    enabled: true
    ingress:
      - name: frontend
        service:
          name: http
          port: 9091
        hosts:
          - host: transmission.fmlab.no
            paths:
              - path: /
                pathType: ImplementationSpecific
        forwardAuth: true
        tls:
          - secretName: transmission-tls
            hosts:
              - transmission.fmlab.no

  tolerations:
    - key: hostname
      operator: Equal
      value: node-nuc
      effect: NoSchedule

  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
          - matchExpressions:
              - key: kubernetes.io/hostname
                operator: In
                values:
                  - node-nuc
