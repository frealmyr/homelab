apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - https://storage.googleapis.com/tekton-releases/pipeline/latest/release.yaml
  - https://storage.googleapis.com/tekton-releases/dashboard/latest/tekton-dashboard-release.yaml
  - manifests/ingress.yaml

patches:
  - patch: |-
      # Configure managed Prometheus to use alertmanager
      - op: add
        path: /data
        value:
            size: 10Gi
            storageClassName: local-path
    target:
      name: config-artifact-pvc
      kind: ConfigMap

# helmCharts:
#   - name: alertmanager
#     includeCRDs: true
#     releaseName: alertmanager
#     version: 0.15.0
#     repo: https://prometheus-community.github.io/helm-charts
#     valuesFile: ./values-alertmanager.yaml