version: '3.5'

networks:
  internal:
    external: false

services:
  samba:
    image: joebiellik/samba-server:latest
    container_name: samba
    restart: unless-stopped
    environment:
      - USERNAME=${USER}
      - PASSWORD=${PASSWORD}
    networks:
      - internal
    ports:
      - "137:137/udp" # required to advertise shares (NMBD)
      - "138:138/udp" # required to advertise shares (NMBD)
      - "139:139/tcp" # default smb port
      - "445:445/tcp" # default smb port
    tmpfs:
      - /tmp
    read_only: false
    volumes:
      - ./config/smb.conf:/etc/samba/smb.conf
      - ${HDD1}:${HDD1}
      - ${HDD2}:${HDD2}
      - ${HOME}/Storage:/Storage
